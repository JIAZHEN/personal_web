!!!
%html
  %head
    %title= full_title(yield(:title))
    = stylesheet_link_tag "application", media: "all", "data-turbolinks-track" => true
    = javascript_include_tag "application"
    = csrf_meta_tags
    = favicon_link_tag
    = render 'layouts/shim'

  %body
    %nav.navbar.navbar-default.transparent.navbar-fixed-top{:role => "banner"}
      .navbar-header
        %button.navbar-toggle{"data-target" => ".navbar-collapse", "data-toggle" => "collapse", :type => "button"}
          %span.sr-only Toggle navigation
          %span.icon-bar
          %span.icon-bar
          %span.icon-bar
        %a.navbar-brand{:href => "/"} Bootply
      %nav.collapse.navbar-collapse{:role => "navigation"}
        %ul.nav.navbar-nav
          %li
            %a{:href => "#sec"} Get Started
          %li
            %a{:href => "#sec"} Edit
          %li
            %a{:href => "#sec"} Visualize
          %li
            %a{:href => "#sec"} Prototype

    #mainContainer.container
      %section#Welcome.sec.pull-center
        %h1 Welcome
      %section#Features.sec.pull-center
        %h1 Features
      %section#Fame.sec.pull-center
        %h1 Fame
      %section#Fortune.sec.pull-center
        %h1 Fortune
      %section#About.sec.pull-center
        %h1 About

    #dotNav.pull-right{"data-spy" => "affix"}
      %ul
        %li.awesome-tooltip.active{:title => "Welcome"}
          %a{:href => "#Welcome"}
        %li.awesome-tooltip{:title => "Features"}
          %a{:href => "#Features"}
        %li.awesome-tooltip{:title => "Fame"}
          %a{:href => "#Fame"}
        %li.awesome-tooltip{:title => "Fortune"}
          %a{:href => "#Fortune"}
        %li.awesome-tooltip{:title => "About"}
          %a{:href => "#About"}

    :javascript
      $(document).ready(function(){
        $('.awesome-tooltip').tooltip({
          placement: 'left'
        });

        $(window).scroll(function() {
          if($(this).scrollTop() > 100) {
            $('.navbar').addClass('opaque'); // adding the opaque class
          } else {
            $('.navbar').removeClass('opaque'); // removing the opaque class
          }
        });

        $(window).bind('scroll',function(e){
          redrawDotNav();
        });

        function redrawDotNav(){

          var topNavHeight = 50;
          var numDivs = $('section').length;

          $('#dotNav li a').removeClass('active').parent('li').removeClass('active');
          $('section').each(function(i,item){
            var ele = $(item), nextTop;

            if (typeof ele.next().offset() != "undefined") {
              nextTop = ele.next().offset().top;
            } else {
              nextTop = $(document).height();
            }

            if (ele.offset() !== null) {
              thisTop = ele.offset().top - ((nextTop - ele.offset().top) / numDivs);
            } else {
              thisTop = 0;
            }

            var docTop = $(document).scrollTop()+topNavHeight;

            if(docTop >= thisTop && (docTop < nextTop)){
              $('#dotNav li').eq(i).addClass('active');
            }
          });
        }

        $('#dotNav li').click(function(){
          var id = $(this).find('a').attr("href"),
          posi,
          ele,
          padding = $('.navbar-fixed-top').height();

          ele = $(id);
          posi = ($(ele).offset()||0).top - padding;

          $('html, body').animate({scrollTop:posi}, 'slow');

          return false;
        });

      });
